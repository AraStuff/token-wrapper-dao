# Anatomy of an Toolkit script

## Outline

- What is Toolkit?
- Why use it?
- Goal of this workshop?

<br>

## Aragon Primer

What does it mean to install an app to an Aragon DAO?

- You're deploying a contract and saying that the DAO controls it.
- The ACL determines what addresses have which permissions to call functions on the contracts.
- An Aragon app is just a solidity contract with the ability to assign permissions to various functions so that you can then assign permissions at DAO level vs the app level.
- When you deploy a solidity contract the constructor is called right away, but with Aragon apps you call the initializer. This is because Aragon apps use a proxy pattern. Your instance of an application is a thin proxy that points to the base contract, and when you want to "upgrade" your application you just change the base contract that the proxy points to.
- New app instances and the Aragon kernal, esp overloaded functions.
- WTF is a script registry?

<br>

## Toolkit Walkthrough

### 0. Imports

- `encodeCallScript` - This encodes a script (code that does stuff that executes as a single transaction) that can then get called if a vote passes.
- `encodeActCall` - This is encoding some variables to then send to the DAO as a transaction. These enocoded actions can then be combined into a single script via `encodeCallScript`.
- `execAppMethod` - A helper function for executing a method on a specific Aragon app. For example, calling the vote method on the voting app.
- `counterfactualAddress` - You give it the DAO's address and an index (the next address generated by the DAO). This allows you to wire together permissions via the ACL before apps are actually created or installed. Before we had to create an app, then set permissions on it. This way you can create and set a permission on an app in a single transaction.
- `encodeContractInteraction` - Takes in the address of the contract you want to interact with as well as it's signature (the name of the function you want to call and it's methods). The signature is very important because the Aragon kernal uses overloaded functions you have to get the signature right.
- `keccak256` - A hashing function that allows us to hash the names of the permissions (ex: `CREATE_VOTES_ROLE`). The ACL doesn't understand strings, so it needs a hash.

### 1. DAO addresses

- dao
- acl
- voting
- finance

> Where/how do we find these?

### 2. Kernal and ACL signatures

- newAppInstanceSignature
- createPermissionSignature
- grantPermissionSignature

### 3. Apps

- appId
- app base
- initialisation signature

> Where/how do we find these?

#### A) TOKEN WRAPPER

- deposit_token
- token_name
- symbol

#### B) Voting

- quorum
- support
- time

### 4. `counterfactualAddress()`

TBD.

### 5. App initialisation payloads

TBD.

### 6. Encode Transactions

- `encodeContractInteraction()`

### 7. Script

- What is a script?
- What apps can execute scripts?

### 8. Create vote

TBD.
